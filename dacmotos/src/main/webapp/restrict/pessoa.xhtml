<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="pessoa" value="#{beanPessoa.pessoa}"/>
        </f:metadata>
        <div id="conteiner-default" >
            <h1>Cadastro de Pessoas Física / Jurídica</h1>


            <h:form >

                <p:fieldset>
                    <p:outputLabel value="Selecione o tipo de Pessoa"/>
                    <p:selectOneRadio layout="grid" columns="1" value="#{beanPessoa.pessoa.tipoPessoa}"  >
                        <f:selectItems value="#{beanTipoPessoa.tipos}" var="tp" itemLabel="#{tp}" itemValue="#{tp}" />
                        <p:ajax update="@form" />
                    </p:selectOneRadio>
                </p:fieldset>
                <p:spacer/>

                <p:fieldset legend="Dados Pessoais" rendered="#{beanPessoa.isTipoPessoaSelecionado}" >
                    <p:panelGrid columns="1" style="width: 100%">
                        <p:outputLabel value="ID" rendered="#{beanPessoa.pessoa.id >0}"/>
                        <p:inputText value="#{beanPessoa.pessoa.id}" rendered="#{beanPessoa.pessoa.id >0}"/>
                    </p:panelGrid>
                    <p:spacer/>

                    <p:panelGrid columns="2" style="width: 100%">
                        <p:outputLabel value="Nome / Razão Social"/>
                        <p:outputLabel value="Data Nascimento / Fundação" />

                        <p:inputText size="90" value="#{beanPessoa.pessoa.nome}"/>
                        <p:calendar size="35" value="#{beanPessoa.pessoa.dataNascimento}" navigator="true" pattern="dd/MM/yyyy"/>
                    </p:panelGrid>

                    <!--DOCUEMENTOS-->
                    <p:outputLabel value="Documentos"/>

                    <p:panelGrid columns="3" style="width: 100%">
                        <p:outputLabel value="CPF / CNPJ" />
                        <p:outputLabel value="RG / IE" />
                        <p:outputLabel value="Habilitação" />

                        <p:inputMask mask="#{beanPessoa.mascara}" size="40" value="#{beanPessoa.pessoa.cpfCnpj}" />
                        <p:inputText size="30" value="#{beanPessoa.pessoa.rgIe}"/>
                        <p:inputText size="40" value="#{beanPessoa.pessoa.habilitacao}"/>
                    </p:panelGrid>
                </p:fieldset >
                <!--ENDERECO-->
                <p:spacer/>
                <p:fieldset legend="Endereço" rendered="#{beanPessoa.isTipoPessoaSelecionado}">
                    <p:panelGrid columns="1" style="width: 100%">
                        <p:outputLabel value="CEP"/>
                        
                         
                        <h:panelGroup>
                           <p:inputMask mask="99.999-999" value="#{beanPessoa.cepString}"/>
                            
                            <p:commandButton value="Buscar Online" action="#{beanPessoa.pesquisar()}" update="@form"/>

                        </h:panelGroup>
                    </p:panelGrid>
                    <p:spacer/>
                    <p:panelGrid columns="2" style="width: 100%">
                        <p:outputLabel value="Endereço" />
                        <p:outputLabel value="Número" />

                        <p:inputText size="115" value="#{beanPessoa.endereco.logradouro}" disabled="#{beanPessoa.isEndereçoNull}"/>
                        <p:inputText size="10" value="#{beanPessoa.endereco.numero}"/>
                    </p:panelGrid>
                    <p:spacer/>
                    <p:panelGrid columns="3" style="width: 100%">
                        <p:outputLabel value="Bairro"/>
                        <p:outputLabel value="Cidade"/>
                        <p:outputLabel value="UF"/>

                        <p:inputText  size="60" value="#{beanPessoa.endereco.bairro}" disabled="#{beanPessoa.isEndereçoNull}"/>
                        <p:inputText size="40" value="#{beanPessoa.endereco.cidade}" disabled="#{beanPessoa.isEndereçoNull}"/>
                        <p:inputText size="15" value="#{beanPessoa.endereco.uf}" disabled="#{beanPessoa.isEndereçoNull}"/>

                    </p:panelGrid>
                    <p:spacer/>
                    <p:panelGrid columns="2" style="width: 100%">
                        <p:outputLabel value="Complemento"  />
                        <p:outputLabel value="Observação" />

                        <p:inputText size="30" value="#{beanPessoa.endereco.complemento}"/>
                        <p:inputTextarea style="width: 500px" value="#{beanPessoa.pessoa.observacao}" />


                    </p:panelGrid>

                </p:fieldset>
                <p:spacer/>
                <!--CONTATO-->
                <p:fieldset legend="Contato" rendered="#{beanPessoa.isTipoPessoaSelecionado}">
                    <p:panelGrid columns="2" style="width: 100%">
                        <p:outputLabel value="Email"/>
                        <p:outputLabel value="Tel. Residencial"/>

                        <p:inputText size="80" value="#{beanPessoa.pessoa.email}" />
                        <p:inputMask size="30"  value="#{beanPessoa.pessoa.telefoneResidencial}"  mask="#{beanMascaras.mascaraCelOitoDigitos}" />
                    </p:panelGrid>

                    <p:panelGrid columns="4" style="width: 100%">
                        <p:outputLabel value="Tel. Comercial"/>
                        <p:outputLabel value="Cel."/>
                        <p:outputLabel value="Recado."/>
                        <p:outputLabel value="Status do Cadastro"/>

                        <p:inputMask mask="#{beanMascaras.mascaraCelOitoDigitos}" value="#{beanPessoa.pessoa.telefoneComercial}" />
                        <h:panelGroup>
                            <p:outputLabel value="Dig."/>
                            <p:spinner value="#{beanPessoa.digitosCel}" min="8" max="9" size="3" >
                                <p:ajax update="cel"/>
                            </p:spinner>
                            <p:inputMask id="cel" mask="#{beanPessoa.mascaraCel}" value="#{beanPessoa.pessoa.telefoneCelular}"/>
                        </h:panelGroup>
                        <p:inputMask mask="#{beanMascaras.mascaraCelOitoDigitos}" value="#{beanPessoa.pessoa.telefoneRecado}" />
                        
                        <p:selectOneMenu value="#{beanPessoa.pessoa.status}">
                            <f:selectItem itemLabel="Selecione"/>
                            <f:selectItems value="#{beanStatusPessoa.statusPessoa}" var="st" itemLabel="#{st}" itemValue="#{st}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>


                </p:fieldset>
                <!--BARRA DE FERRAMENTA-->
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Salvar" action="#{beanPessoa.save()}" update="@form"/>
                        <p:commandButton value="Limpar" action="#{beanPessoa.clear()}" update="@form"/>

                    </f:facet>
                    
                    <f:facet name="right">
                        <p:commandButton value="Pesquisar" action="/restrict/pessoalista.xhtml?faces-redirect=true" actionListener="#{beanPessoa.criarObjeto()}" />
                           
                    </f:facet>

                </p:toolbar>
            </h:form>

            <!--AREA DE PESQUISA-->


            
        </div>
    </ui:define>

</ui:composition>
